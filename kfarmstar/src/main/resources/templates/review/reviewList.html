<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/default}">
	
		<!-- 사용자 정의 Css -->
		<th:block layout:fragment="customCss">
			 <!-- Bootstrap -->
		    <link th:href="@{/vendors/bootstrap/dist/css/bootstrap.min.css}" rel="stylesheet">
		    <!-- Font Awesome -->
		    <link th:href="@{/vendors/font-awesome/css/font-awesome.min.css}" rel="stylesheet">
		    <!-- NProgress -->
		    <link th:href="@{/vendors/nprogress/nprogress.css}" rel="stylesheet">
		    <!-- iCheck -->
		   <link th:href="@{/vendors/iCheck/skins/flat/green.css}" rel="stylesheet">
		
		    <!-- Custom Theme Style -->
		    <link th:href="@{/build/css/custom.min.css}" rel="stylesheet">
		</th:block>

		<!-- 사용자 정의 Script -->
		<th:block layout:fragment="customScript">
			
		    <!-- iCheck -->
		    <script th:src="@{/vendors/iCheck/icheck.min.js}"></script>
			
			<script>
			document.addEventListener('DOMContentLoaded', function(){ //DOM 생성 후 이벤트 리스너 등록
			    //더보기 버튼 이벤트 리스너
			    document.querySelector('.btn_open').addEventListener('click', function(e){
			        
			        let classList = document.querySelector('.detailinfo').classList; // 더보기 프레임의 클래스 정보 얻기
			        let contentHeight = document.querySelector('.detailinfo > .content').offsetHeight; //컨텐츠 높이 얻기

			        // 2단계이면 전체보기로
			        if(classList.contains('showstep2')){
			            classList.remove('showstep2');
			        }
			        // 1단계이면 2단계로
			        if(classList.contains('showstep1')){
			            classList.remove('showstep1');
			            if(contentHeight > 600){
			                classList.add('showstep2');
			            }else{
			                document.querySelector('.btn_open').classList.add('hide');
			            }
			        }
			        //전체보기시 더보기 버튼 감추기 & 감추기 버튼 표시
			        if(!classList.contains('showstep1') && !classList.contains('showstep2')){
			            e.target.classList.add('hide');
			            document.querySelector('.btn_close').classList.remove('hide');
			            
			        }
			        document.querySelector('.btn_close').addEventListener('click', function(e){
			            e.target.classList.add('hide');
			            document.querySelector('.btn_open').classList.remove('hide'); // 더보기 버튼 감춤
			            document.querySelector('.detailinfo').classList.add('showstep1'); // 초기 감춤 상태로 복귀
			        });
			        window.addEventListener('load', function(){
					    let contentHeight = document.querySelector('.detailinfo > .content').offsetHeight; //컨텐츠 높이 얻기
					    if(contentHeight <= 100){
					        document.querySelector('.detailinfo').classList.remove('showstep1'); // 초기값보다 작으면 전체 컨텐츠 표시
					        document.querySelector('.btn_open').classList.add('hide'); // 버튼 감춤
					    }
					});
			        
			    });
			});
			</script>
   		</th:block>

		<!-- 사용자 정의 title -->
		<th:block layout:fragment="customTitle">
			<title th:text="${title}"></title>
		</th:block>
		
		<!-- 사용자 정의 contents -->
		<th:block layout:fragment="customContents">
			<link rel="stylesheet" type="text/css" th:href="@{/asset/css/list.css}">
			<link href="/asset/css/review.css" rel="stylesheet" />
			<div class="low">
				<div class="card card-outline-primary">
					<div class="col-lg-12">
						<div class="card-header">
							<h4><i class="fa fa-thumbs-up"> </i> 리뷰</h4>
						</div>
						<div class="x_title">
	
							<!-- START : 화면 경로
	                 		============================== -->
							<div th:replace="fragments/titleBreadcrumb :: breadcrumbFragment"></div>
							<!-- END : 화면 경로
		                 	============================== -->
	
						</div>
						<table class="table table-hover">
							<thead>
								<tr>
									<th>평점</th>
									<th>리뷰내용</th>
									<th>작성자</th>
									<th>작성일자</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="l : ${reviewList}">
									<td th:text="${l.reviewScore}"></td>
									<td th:text="${l.reviewContent"></td>
						
									<td th:text="${l.memberId}"></td>
									<td th:text="${l.reviewEntryDate}"></td>
								</tr>
							</tbody>
						</table>
						<div class="detailinfo showstep1">
						    <div class="content"></div>
						</div>
						<a href="#" class="btn_open">더보기</a>
						<a href="#" class="btn_close hide">감추기</a>
						<div class="list form-group" style=" text-align: center;">
							<div class="pagination">
								<div class="dataTables_paginate paging_simple_numbers"
									id="datatable_paginate">
									<ul class="pagination">
										<li class="paginate_button previous disabled"
											id="datatable_previous"><a href="#"
											aria-controls="datatable" data-dt-idx="0" tabindex="0">Previous</a>
										</li>
										<li class="paginate_button active"><a href="#"
											aria-controls="datatable" data-dt-idx="1" tabindex="0">1</a></li>
										<li class="paginate_button "><a href="#"
											aria-controls="datatable" data-dt-idx="2" tabindex="0">2</a></li>
										<li class="paginate_button "><a href="#"
											aria-controls="datatable" data-dt-idx="3" tabindex="0">3</a></li>
										<li class="paginate_button "><a href="#"
											aria-controls="datatable" data-dt-idx="4" tabindex="0">4</a></li>
										<li class="paginate_button "><a href="#"
											aria-controls="datatable" data-dt-idx="5" tabindex="0">5</a></li>
										<li class="paginate_button "><a href="#"
											aria-controls="datatable" data-dt-idx="6" tabindex="0">6</a></li>
										<li class="paginate_button next" id="datatable_next"><a
											href="#" aria-controls="datatable" data-dt-idx="7"
											tabindex="0">Next</a></li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</th:block>
</html>