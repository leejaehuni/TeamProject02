<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kfarmstar.admin.mapper.MemberMapper">
	
	<resultMap type="Member" id="memberResultMap">
		<result 	column="member_id" 			property="memberId"/>
		<result column="member_name" 		property="memberName"/>
		<result column="member_level" 		property="memberLevel"/>
		<result column="member_pw" 			property="memberPw"/>
		<result column="member_nickname" 	property="memberNickname"/>
		<result column="member_phone" 		property="memberPhone"/>
		<result column="member_birth" 		property="memberBirth"/>
		<result column="member_email" 		property="memberEmail"/>
		<result column="member_point" 		property="memberPoint"/>
		<result column="member_date" 		property="memberDate"/>
	</resultMap>
	
	<resultMap type="sellerStore" id="sellerResultMap">
		<result column="seller_store_num" 		property="sellerStoreNum"/>
		<result column="member_id" 				property="memberId"/>
		<result column="seller_store_name" 		property="sellerStoreName"/>
		<result column="seller_license_num" 	property="sellerLicenseNum"/>
		<result column="seller_store_phone" 	property="sellerStorePhone"/>
		<result column="seller_entry_date" 		property="sellerEntryDate"/>
		<result column="seller_store_addr" 		property="sellerStoreAddr"/>
		<result column="seller_tax_type" 		property="sellerTaxType"/>
		<association property="member" javaType="Member">
			<result column="member_id" 			property="memberId"/>
			<result column="member_name" 		property="memberName"/>
			<result column="member_level" 		property="memberLevel"/>
			<result column="member_pw" 			property="memberPw"/>
			<result column="member_nickname" 	property="memberNickname"/>
			<result column="member_phone" 		property="memberPhone"/>
			<result column="member_birth" 		property="memberBirth"/>
			<result column="member_email" 		property="memberEmail"/>
			<result column="member_point" 		property="memberPoint"/>
			<result column="member_date" 		property="memberDate"/>
		</association>
	</resultMap>
	
	<insert id="addMember" parameterType="Member">
		/* 관리자 회원 가입 */
		INSERT INTO member
		(
			 member_id
			,member_name
			,member_level
			,member_pw
			,member_nickname
			,member_addr
			,member_phone
			,member_birth
			,member_email
			,member_point
			,member_date
		)VALUES (
		     #{memberId}
		   , #{memberName}
		   , #{memberLevel}
		   , #{memberPw}
		   , #{memberNickname}
		   , #{memberAddr}
		   , #{memberPhone}
		   , #{memberBirth}
		   , #{memberEmail}
		   , #{memberPoint}
		   , CURDATE()
		);
	</insert>
	
	<select id="sellerStoreInfo" resultMap="sellerResultMap" fetchSize="1000">
		/* 사업장 목록 조회 */
		SELECT 
			 s.seller_store_num
			,s.member_id
			,s.seller_store_name
			,s.seller_license_num
			,s.seller_store_phone
			,s.seller_entry_date
			,s.seller_store_addr
			,s.seller_tax_type
		FROM
			seller_store AS s
			INNER JOIN
			member AS m
			ON
			s.member_id = m.member_id;
	</select>
	
	<select id="getMemberList" resultMap="memberResultMap">
		/* 회원 전체 조회*/
		SELECT
			member_id,
			member_name,
			member_level,
			member_pw,
			member_nickname,
			member_addr,
			member_phone,
			member_birth,
			member_email,
			member_point,
			member_date
		FROM
			member AS m
	</select>
	
</mapper>